<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Table - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-add_column">#add_column</a>
    
    <li ><a href="#method-i-add_row">#add_row</a>
    
    <li ><a href="#method-i-add_rows">#add_rows</a>
    
    <li ><a href="#method-i-append">#append</a>
    
    <li ><a href="#method-i-bottom">#bottom</a>
    
    <li ><a href="#method-i-column">#column</a>
    
    <li ><a href="#method-i-count">#count</a>
    
    <li ><a href="#method-i-del_column">#del_column</a>
    
    <li ><a href="#method-i-del_row">#del_row</a>
    
    <li ><a href="#method-i-each">#each</a>
    
    <li ><a href="#method-i-empty-3F">#empty?</a>
    
    <li ><a href="#method-i-get_columns">#get_columns</a>
    
    <li ><a href="#method-i-get_rows">#get_rows</a>
    
    <li ><a href="#method-i-intersect">#intersect</a>
    
    <li ><a href="#method-i-join">#join</a>
    
    <li ><a href="#method-i-length">#length</a>
    
    <li ><a href="#method-i-rename_header">#rename_header</a>
    
    <li ><a href="#method-i-row">#row</a>
    
    <li ><a href="#method-i-select">#select</a>
    
    <li ><a href="#method-i-size">#size</a>
    
    <li ><a href="#method-i-sort">#sort</a>
    
    <li ><a href="#method-i-sort-21">#sort!</a>
    
    <li ><a href="#method-i-sub">#sub</a>
    
    <li ><a href="#method-i-tally">#tally</a>
    
    <li ><a href="#method-i-to_a">#to_a</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-top">#top</a>
    
    <li ><a href="#method-i-union">#union</a>
    
    <li ><a href="#method-i-where">#where</a>
    
    <li ><a href="#method-i-write_file">#write_file</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Table">
  <h1 id="class-Table" class="class">
    class Table
  </h1>

  <section class="description">
    
<p>This class is a Ruby representation of a table. All data is captured as
type <code>String</code> by default. Columns are referred to by their
<code>String</code> headers which are assumed to be identified in the first
row of the input file. Output is written by default to tab-delimited files
with the first row serving as the header names.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-headers" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">headers</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The headers attribute contains the table headers used to reference columns
in the <code>Table</code>.  All headers are represented as
<code>String</code> types.</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(input=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Instantiate a <code>Table</code> object using a tab-delimited file</p>

<h4 id="method-c-new-label-Attributes">Attributes<span><a href="#method-c-new-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>input</code>
<dd>
<p>OPTIONAL <code>Array</code> of rows or <code>String</code> to identify the
name of the tab-delimited file to read</p>
</dd></dl>

<h4 id="method-c-new-label-Examples">Examples<span><a href="#method-c-new-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre>cities = Table.new() # empty table
cities = Table.new([ [&quot;City&quot;, &quot;State], [&quot;New York&quot;, &quot;NY&quot;], [&quot;Dallas&quot;, &quot;TX&quot;] ]) # create from Array of rows
cities = Table.new(&quot;cities.txt&quot;) # read from file
cities = Table.new(capitals)  # create from table</pre>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">input</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@headers</span> = []
  <span class="ruby-ivar">@table</span> = {}
  <span class="ruby-ivar">@indices</span> = {}
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:fetch</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">input</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:fetch</span>)
      <span class="ruby-comment">#create Table from rows</span>
      <span class="ruby-identifier">add_rows</span>(<span class="ruby-identifier">input</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:upcase</span>)
    <span class="ruby-comment"># a string, then read_file</span>
    <span class="ruby-identifier">read_file</span>(<span class="ruby-identifier">input</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">input</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:headers</span>)
    <span class="ruby-ivar">@headers</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">input</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">row</span>) }
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># else create empty +Table+</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3C" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(*row)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-add_row">add_row</a>
        </div>
        
      </div>

    
      <div id="method-i-add_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_column</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add a column to the <a href="Table.html">Table</a>. Raises ArgumentError if
the column name is already taken  or there are not the correct number of
values.</p>

<h4 id="method-i-add_column-label-Attributes">Attributes<span><a href="#method-i-add_column-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>args</code>
<dd>
<p>Array of <code>String</code> to identify the name of the column (see
examples)</p>
</dd></dl>

<h4 id="method-i-add_column-label-Examples">Examples<span><a href="#method-i-add_column-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">add_column</span>(<span class="ruby-string">&quot;City&quot;</span>, [<span class="ruby-string">&quot;New York&quot;</span>, <span class="ruby-string">&quot;Dallas&quot;</span>, <span class="ruby-string">&quot;San Franscisco&quot;</span>])
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">add_column</span>([<span class="ruby-string">&quot;City&quot;</span>,<span class="ruby-string">&quot;New York&quot;</span>, <span class="ruby-string">&quot;Dallas&quot;</span>, <span class="ruby-string">&quot;San Franscisco&quot;</span>])
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">add_column</span>(<span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;New York&quot;</span>, <span class="ruby-string">&quot;Dallas&quot;</span>, <span class="ruby-string">&quot;San Franscisco&quot;</span>)
</pre>
          
          

          
          <div class="method-source-code" id="add_column-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_column</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten!</span>
    <span class="ruby-identifier">colname</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-identifier">column_vals</span> = <span class="ruby-identifier">args</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Duplicate Column Name!&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_vals</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">length</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Number of elements in column does not match existing table&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">append_col</span>(<span class="ruby-identifier">colname</span>, <span class="ruby-identifier">column_vals</span>)    
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_row" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_row</span><span
            class="method-args">(*row)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add a row to the <a href="Table.html">Table</a>, appending it to the end.
Raises ArgumentError if  there are not the correct number of values.</p>

<h4 id="method-i-add_row-label-Attributes">Attributes<span><a href="#method-i-add_row-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>row</code>
<dd>
<p><code>Array</code> to hold the row values</p>
</dd></dl>

<h4 id="method-i-add_row-label-Examples">Examples<span><a href="#method-i-add_row-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span> = <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">add_row</span>( [<span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;State&quot;</span>] ) <span class="ruby-comment"># create new Table with headers</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">add_row</span>(<span class="ruby-string">&quot;New York&quot;</span>, <span class="ruby-string">&quot;NY&quot;</span>) <span class="ruby-comment"># add data row to Table</span>
</pre>
          
          

          
          <div class="method-source-code" id="add_row-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_row</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">row</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">row</span> = <span class="ruby-identifier">row</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-ivar">@headers</span> = <span class="ruby-identifier">row</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Wrong number of fields in Table input&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">append_row</span>(<span class="ruby-identifier">row</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-3C-3C">&lt;&lt;</a>
        </div>
        

        
      </div>

    
      <div id="method-i-add_rows" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_rows</span><span
            class="method-args">(array_of_rows)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add one or more rows to the <a href="Table.html">Table</a>, appending it to
the end. Raises ArgumentError if  there are not the correct number of
values.  The first row becomes the table headers if currently undefined.</p>

<h4 id="method-i-add_rows-label-Attributes">Attributes<span><a href="#method-i-add_rows-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>array_of_rows</code>
<dd>
<p><code>Array</code> of <code>Arrays</code> to hold the rows values</p>
</dd></dl>

<h4 id="method-i-add_rows-label-Examples">Examples<span><a href="#method-i-add_rows-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">add_rows</span>([ [<span class="ruby-string">&quot;New York&quot;</span>, <span class="ruby-string">&quot;NY&quot;</span>], [<span class="ruby-string">&quot;Austin&quot;</span>, <span class="ruby-string">&quot;TX&quot;</span>] ])
</pre>
          
          

          
          <div class="method-source-code" id="add_rows-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_rows</span>(<span class="ruby-identifier">array_of_rows</span>)
  <span class="ruby-identifier">array_of_rows</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">clone</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-append" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append</span><span
            class="method-args">(a_table)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Append one <a href="Table.html">Table</a> object to another. Raises
ArgumentError if the header values and order do not  align with the
destination <a href="Table.html">Table</a>. Return self if appending an
empty table. Return given table if  appending to an empty table.</p>

<h4 id="method-i-append-label-Attributes">Attributes<span><a href="#method-i-append-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>a_table</code>
<dd>
<p><code>Table</code> to be added</p>
</dd></dl>

<h4 id="method-i-append-label-Examples">Examples<span><a href="#method-i-append-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">more_cities</span>)
</pre>
          
          

          
          <div class="method-source-code" id="append-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append</span>(<span class="ruby-identifier">a_table</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">a_table</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Table</span> 
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Argument to append is not a Table&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">empty?</span> 
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">a_table</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">a_table</span>.<span class="ruby-identifier">empty?</span> 
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">a_table</span>.<span class="ruby-identifier">headers</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@headers</span> 
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Argument to append does not have matching headers&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">a_table</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">clone</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bottom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bottom</span><span
            class="method-args">(colname, num=1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns counts of the least frequent values found in a given column in the
form of a <a href="Table.html">Table</a>.  Raises ArgumentError if the
column is not found.  If no limit is given to the number of values, only
the least frequent value will be returned.</p>

<h4 id="method-i-bottom-label-Attributes">Attributes<span><a href="#method-i-bottom-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to count</p>
</dd><dt><code>num</code>
<dd>
<p>OPTIONAL <code>String</code> number of values to return</p>
</dd></dl>

<h4 id="method-i-bottom-label-Examples">Examples<span><a href="#method-i-bottom-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">bottom</span>(<span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># returns a Table with the least frequent state in the cities Table</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">bottom</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-value">10</span>)  <span class="ruby-comment"># returns a Table with the 10 least frequent states in the cities Table</span>
</pre>
          
          

          
          <div class="method-source-code" id="bottom-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 363</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bottom</span>(<span class="ruby-identifier">colname</span>, <span class="ruby-identifier">num</span>=<span class="ruby-value">1</span>)
  <span class="ruby-identifier">freq</span> = <span class="ruby-identifier">tally</span>(<span class="ruby-identifier">colname</span>).<span class="ruby-identifier">to_a</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">sort_by</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> }
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">freq</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">num</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">unshift</span>([<span class="ruby-identifier">colname</span>,<span class="ruby-string">&quot;Count&quot;</span>]))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">column</span><span
            class="method-args">(colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a copy of a column from the table, identified by column name.
Returns empty Array if column name not found.</p>

<h4 id="method-i-column-label-Attributes">Attributes<span><a href="#method-i-column-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the name of the column</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="column-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">column</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">get_col</span>(<span class="ruby-identifier">colname</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">count</span><span
            class="method-args">(colname=nil, value=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Counts the number of instances of a particular string, given a column name,
and returns an integer &gt;= 0. Returns <code>nil</code> if the column is
not found. If no parameters are given, returns the number of rows in the
table.</p>

<h4 id="method-i-count-label-Attributes">Attributes<span><a href="#method-i-count-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p>OPTIONAL <code>String</code> to identify the column to count</p>
</dd><dt><code>value</code>
<dd>
<p>OPTIONAL <code>String</code> value to count</p>
</dd></dl>

<h4 id="method-i-count-label-Examples">Examples<span><a href="#method-i-count-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">count</span>  <span class="ruby-comment"># returns number of rows in cities Table</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">size</span>   <span class="ruby-comment"># same as cities.count</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment"># same as cities.count</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-string">&quot;NY&quot;</span>)  <span class="ruby-comment"># returns the number of rows with State == &quot;NY&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="count-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 309</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">count</span>(<span class="ruby-identifier">colname</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">value</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">colname</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">each_key</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-keyword">return</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">e</span>).<span class="ruby-identifier">length</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">colname</span>)
  
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">colname</span>]
    <span class="ruby-identifier">result</span> = <span class="ruby-value">0</span>
    <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">colname</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">val</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> 
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">nil</span> 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-size">size</a>, <a href="Table.html#method-i-length">length</a>
        </div>
        

        
      </div>

    
      <div id="method-i-del_column" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">del_column</span><span
            class="method-args">(colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delete a column from the <a href="Table.html">Table</a>. Raises
ArgumentError if the column name does not exist.</p>

<h4 id="method-i-del_column-label-Attributes">Attributes<span><a href="#method-i-del_column-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the name of the column</p>
</dd></dl>

<h4 id="method-i-del_column-label-Examples">Examples<span><a href="#method-i-del_column-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">del_column</span>(<span class="ruby-string">&quot;State&quot;</span>) <span class="ruby-comment"># returns table without &quot;State&quot; column</span>
</pre>
          
          

          
          <div class="method-source-code" id="del_column-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">del_column</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Column name does not exist!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)
  
  <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-del_row" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">del_row</span><span
            class="method-args">(rownum)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Delete a row from the <a href="Table.html">Table</a>. Raises ArgumentError
if the row number is not found</p>

<h4 id="method-i-del_row-label-Attributes">Attributes<span><a href="#method-i-del_row-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>rownum</code>
<dd>
<p><code>FixNum</code> to hold the row number</p>
</dd></dl>

<h4 id="method-i-del_row-label-Examples">Examples<span><a href="#method-i-del_row-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">del_row</span>(<span class="ruby-value">3</span>)  <span class="ruby-comment"># deletes row with index 3 (4th row)</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">del_row</span>(<span class="ruby-value">-1</span>) <span class="ruby-comment"># deletes last row (per Ruby convention)</span>
</pre>
          
          

          
          <div class="method-source-code" id="del_row-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">del_row</span>(<span class="ruby-identifier">rownum</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rownum</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">length</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Row number does not exist!&quot;</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>].<span class="ruby-identifier">delete_at</span>(<span class="ruby-identifier">rownum</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each</span><span
            class="method-args">() { |nextrow| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Defines an iterator for <code>Table</code> which produces rows of data
(headers omitted) for its calling block.</p>
          
          

          
          <div class="method-source-code" id="each-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">nextrow</span> = []
      <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">begin</span>
          <span class="ruby-identifier">nextrow</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>][<span class="ruby-identifier">index</span>].<span class="ruby-identifier">clone</span> 
        <span class="ruby-keyword">rescue</span>
          <span class="ruby-identifier">nextrow</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>][<span class="ruby-identifier">index</span>]
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">nextrow</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_enum</span>(<span class="ruby-value">:each</span>)
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-empty-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return true if the <a href="Table.html">Table</a> is empty, false
otherwise.</p>
          
          

          
          <div class="method-source-code" id="empty-3F-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_columns" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">get_columns</span><span
            class="method-args">(*columns)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-select">select</a>
        </div>
        
      </div>

    
      <div id="method-i-get_rows" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">get_rows</span><span
            class="method-args">(colname, condition=nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-where">where</a>
        </div>
        
      </div>

    
      <div id="method-i-intersect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">intersect</span><span
            class="method-args">(table2, colname, col2name=colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an Array with the intersection of columns from different tables,
eliminating duplicates. Return nil if a column is not found.</p>

<h4 id="method-i-intersect-label-Attributes">Attributes<span><a href="#method-i-intersect-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>table2</code>
<dd>
<p><code>Table</code> to identify the secondary table in the intersection</p>
</dd><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to intersection</p>
</dd><dt><code>col2name</code>
<dd>
<p>OPTIONAL <code>String</code> to identify the column in the second table to
intersection</p>
</dd></dl>

<h4 id="method-i-intersect-label-Examples">Examples<span><a href="#method-i-intersect-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">intersect</span>(<span class="ruby-identifier">capitals</span>, <span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;Capital&quot;</span>)  <span class="ruby-comment"># returns Array with all capitals that are also in the cities table</span>
</pre>
          
          

          
          <div class="method-source-code" id="intersect-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 573</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">intersect</span>(<span class="ruby-identifier">table2</span>, <span class="ruby-identifier">colname</span>, <span class="ruby-identifier">col2name</span>=<span class="ruby-identifier">colname</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid table!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Table</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">col2name</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">column</span>(<span class="ruby-identifier">colname</span>) <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">column</span>(<span class="ruby-identifier">col2name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-join" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join</span><span
            class="method-args">(table2, colname, col2name=colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Given a second table to join against, and a field/column, return a
<code>Table</code> which contains a join of the two tables. Join only lists
the common column once, under the column name of the first table (if
different from the name of thee second). All columns from both tables are
returned. Returns <code>nil</code> if the column is not found.</p>

<h4 id="method-i-join-label-Attributes">Attributes<span><a href="#method-i-join-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>table2</code>
<dd>
<p><code>Table</code> to identify the secondary table in the join</p>
</dd><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to join on</p>
</dd><dt><code>col2name</code>
<dd>
<p>OPTIONAL <code>String</code> to identify the column in the second table to
join on</p>
</dd></dl>

<h4 id="method-i-join-label-Examples">Examples<span><a href="#method-i-join-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">capitals</span>, <span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;Capital&quot;</span>)  <span class="ruby-comment"># returns a Table of cities that are also state capitals</span>
<span class="ruby-identifier">capitals</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">cities</span>, <span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># returns a Table of capital cities with populations info from the cities table</span>
</pre>
          
          

          
          <div class="method-source-code" id="join-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">join</span>(<span class="ruby-identifier">table2</span>, <span class="ruby-identifier">colname</span>, <span class="ruby-identifier">col2name</span>=<span class="ruby-identifier">colname</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid table!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Table</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">col2name</span>)
  
  <span class="ruby-identifier">dedupe_headers</span>(<span class="ruby-identifier">table2</span>, <span class="ruby-identifier">colname</span>)

  <span class="ruby-identifier">result</span> = [ <span class="ruby-constant">Array</span>(<span class="ruby-ivar">@headers</span>) <span class="ruby-operator">+</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">table2</span>.<span class="ruby-identifier">headers</span>) ]
  <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">colname</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">t2_index</span> = <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">column</span>(<span class="ruby-identifier">col2name</span>).<span class="ruby-identifier">find_index</span>(<span class="ruby-ivar">@table</span>[<span class="ruby-identifier">colname</span>][<span class="ruby-identifier">index</span>])
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">t2_index</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">row</span>(<span class="ruby-identifier">index</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">row</span>(<span class="ruby-identifier">t2_index</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-comment">#no rows selected</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-length" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">length</span><span
            class="method-args">(colname=nil, value=nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-count">count</a>
        </div>
        
      </div>

    
      <div id="method-i-rename_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_header</span><span
            class="method-args">(orig_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Rename a header value for this <code>Table</code> object.</p>

<h4 id="method-i-rename_header-label-Attributes">Attributes<span><a href="#method-i-rename_header-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>orig_name</code>
<dd>
<p><code>String</code> current header name</p>
</dd><dt><code>new_name</code>
<dd>
<p><code>String</code> indicating new header name</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="rename_header-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_header</span>(<span class="ruby-identifier">orig_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Original Column name type invalid&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">orig_name</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">String</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;New Column name type invalid&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_name</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">String</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Column Name does not exist!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">orig_name</span>

  <span class="ruby-identifier">update_header</span>(<span class="ruby-identifier">orig_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-row" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">row</span><span
            class="method-args">(index)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return a copy of a row from the table as an <code>Array</code>, given an
index (i.e. row number). Returns empty Array if the index is out of bounds.</p>

<h4 id="method-i-row-label-Attributes">Attributes<span><a href="#method-i-row-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>index</code>
<dd>
<p><code>FixNum</code> indicating index of the row.</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="row-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">row</span>(<span class="ruby-identifier">index</span>)    
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">get_row</span>(<span class="ruby-identifier">index</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-select" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">select</span><span
            class="method-args">(*columns)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Select columns from the table, given one or more column names. Returns an
instance of <code>Table</code> with the results.  Raises ArgumentError if
any column is not valid.</p>

<h4 id="method-i-select-label-Attributes">Attributes<span><a href="#method-i-select-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>columns</code>
<dd>
<p>Variable <code>String</code> arguments to identify the columns to select</p>
</dd></dl>

<h4 id="method-i-select-label-Examples">Examples<span><a href="#method-i-select-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">select</span>(<span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># returns a Table of &quot;City&quot; and &quot;State&quot; columns</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">select</span>(<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">headers</span>)  <span class="ruby-comment"># returns a new Table that is a duplicate of cities</span>
</pre>
          
          

          
          <div class="method-source-code" id="select-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 400</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">select</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name(s)&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">columns</span>
  <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">flatten!</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">c</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span> = []
  <span class="ruby-identifier">result_headers</span> = []
  <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">col</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">result_headers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">col</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> }
  <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">result_headers</span>
  <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">this_row</span> = []
    <span class="ruby-identifier">result_headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">this_row</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>][<span class="ruby-identifier">index</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">this_row</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result_headers</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>() <span class="ruby-operator">:</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-get_columns">get_columns</a>
        </div>
        

        
      </div>

    
      <div id="method-i-size" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">size</span><span
            class="method-args">(colname=nil, value=nil)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-count">count</a>
        </div>
        
      </div>

    
      <div id="method-i-sort" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sort</span><span
            class="method-args">(column=nil, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Sort the table based on given column. Uses precedence as defined in the 
column. By default will sort by the value in the first column.</p>

<h4 id="method-i-sort-label-Attributes">Attributes<span><a href="#method-i-sort-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>args</code>
<dd>
<p>OPTIONAL <code>String</code> to identify the column on which to sort</p>
</dd></dl>

<h4 id="method-i-sort-label-Options">Options<span><a href="#method-i-sort-label-Options">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre>datatype =&gt; :Fixnum
datatype =&gt; :Float
datatype =&gt; :Date</pre>

<h4 id="method-i-sort-label-Examples">Examples<span><a href="#method-i-sort-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">sort</span>(<span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># Re-orders the cities table based on State name</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">sort</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span><span class="ruby-operator">&lt;=&gt;</span><span class="ruby-identifier">a</span> }  <span class="ruby-comment"># Reverse the order of the cities table</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">sort</span>(<span class="ruby-string">&quot;State&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span><span class="ruby-operator">&lt;=&gt;</span><span class="ruby-identifier">a</span> }  <span class="ruby-comment"># Sort by State in reverse alpha order</span>
</pre>
          
          

          
          <div class="method-source-code" id="sort-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 598</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sort</span>(<span class="ruby-identifier">column</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">col_index</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">String</span>
    <span class="ruby-identifier">col_index</span> = <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">column</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Fixnum</span>
    <span class="ruby-identifier">col_index</span> = <span class="ruby-identifier">column</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># return empty Table if empty</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">empty?</span> 
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>() 
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">neworder</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">neworder</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">OrderedRow</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">row</span>,<span class="ruby-identifier">col_index</span>) }

  <span class="ruby-identifier">result</span> = [<span class="ruby-identifier">neworder</span>.<span class="ruby-identifier">shift</span>.<span class="ruby-identifier">data</span>] <span class="ruby-comment"># take off headers</span>
  <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">neworder</span>.<span class="ruby-identifier">sort!</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">neworder</span>.<span class="ruby-identifier">sort!</span>
  <span class="ruby-identifier">neworder</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">data</span> }

  <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-sort-21">sort!</a>
        </div>
        

        
      </div>

    
      <div id="method-i-sort-21" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">sort!</span><span
            class="method-args">(column=nil, &block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Table.html#method-i-sort">sort</a>
        </div>
        
      </div>

    
      <div id="method-i-sub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sub</span><span
            class="method-args">(colname, match=nil, replace=nil, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Given a field/column, and a regular expression to match against, and a
replacement string, create a new table which performs a substitute
operation on column data.  In the case that the given replacement is a
<code>String</code>, a direct substitute is performed. In the case that it
is a <code>Hash</code> and the matched text is one of its keys, the
corresponding <code>Hash</code> value will be substituted.</p>

<p>Optionally takes a block containing an operation to perform on all matching
data elements  in the given column. Raises ArgumentError if the column is
not found.</p>

<h4 id="method-i-sub-label-Attributes">Attributes<span><a href="#method-i-sub-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to substitute on</p>
</dd><dt><code>match</code>
<dd>
<p>OPTIONAL <code>String</code> or <code>Regexp</code> to match the value in
the selected column</p>
</dd><dt><code>replace</code>
<dd>
<p>OPTIONAL <code>String</code> or <code>Hash</code> to specify the
replacement text for the given match value</p>
</dd><dt>+&amp;block+
<dd>
<p>OPTIONAL block to execute against matching values</p>
</dd></dl>

<h4 id="method-i-sub-label-Examples">Examples<span><a href="#method-i-sub-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-string">&quot;Population&quot;</span>, <span class="ruby-regexp">/(.*?),(.*?)/</span>, <span class="ruby-string">&#39;\1\2&#39;</span>)  <span class="ruby-comment"># eliminate commas</span>
<span class="ruby-identifier">capitals</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-regexp">/NY/</span>, <span class="ruby-string">&quot;New York&quot;</span>)  <span class="ruby-comment"># replace acronym with full name</span>
<span class="ruby-identifier">capitals</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-regexp">/North|South/</span>, {<span class="ruby-string">&quot;North&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;South&quot;</span>, <span class="ruby-string">&quot;South&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;North&quot;</span>}) <span class="ruby-comment"># Northern states for Southern and vice-versa</span>
<span class="ruby-identifier">capitals</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-string">&quot;State&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">downcase</span> } <span class="ruby-comment"># Lowercase for all values</span>
</pre>
          
          

          
          <div class="method-source-code" id="sub-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 513</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sub</span>(<span class="ruby-identifier">colname</span>, <span class="ruby-identifier">match</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">replace</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;No regular expression to match against&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">match</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span> (<span class="ruby-constant">String</span>.<span class="ruby-identifier">try_convert</span>(<span class="ruby-identifier">match</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">try_convert</span>(<span class="ruby-identifier">match</span>))
         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Match expression must be String or Regexp&quot;</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span> (<span class="ruby-identifier">replace</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:fetch</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">replace</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_str</span>))
       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Replacement must be String or Hash&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>([<span class="ruby-ivar">@headers</span>])
  <span class="ruby-identifier">col_index</span> = <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">colname</span>)

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
      <span class="ruby-identifier">row</span>[<span class="ruby-identifier">col_index</span>] = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">col_index</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">row</span>[<span class="ruby-identifier">col_index</span>] = <span class="ruby-identifier">row</span>[<span class="ruby-identifier">col_index</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-identifier">match</span>, <span class="ruby-identifier">replace</span>)
    <span class="ruby-keyword">end</span>  
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">row</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tally" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tally</span><span
            class="method-args">(colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Count instances in a particular field/column and return a
<code>Table</code> of the results. Raises ArgumentError if the column is
not found.</p>

<h4 id="method-i-tally-label-Attributes">Attributes<span><a href="#method-i-tally-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to tally</p>
</dd></dl>

<h4 id="method-i-tally-label-Examples">Examples<span><a href="#method-i-tally-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">tally</span>(<span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># returns each State in the cities Table with number of occurences</span>
</pre>
          
          

          
          <div class="method-source-code" id="tally-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tally</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span>  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)

  <span class="ruby-identifier">result</span> = {}
  <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">colname</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">val</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">result</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">val</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span>[<span class="ruby-identifier">val</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">result</span>[<span class="ruby-identifier">val</span>] = <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>([[<span class="ruby-identifier">colname</span>,<span class="ruby-string">&quot;Count&quot;</span>]] <span class="ruby-operator">+</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">to_a</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_a" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_a</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts a <code>Table</code> object to an array of arrays (each row). The
first entry are the table headers.</p>

<h4 id="method-i-to_a-label-Attributes">Attributes<span><a href="#method-i-to_a-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>none</p>
          
          

          
          <div class="method-source-code" id="to_a-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">result</span> = [ <span class="ruby-constant">Array</span>(<span class="ruby-ivar">@headers</span>) ]
  
  <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">items</span> = []
    <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>][<span class="ruby-identifier">index</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">items</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts a <code>Table</code> object to a tab-delimited string.</p>

<h4 id="method-i-to_s-label-Attributes">Attributes<span><a href="#method-i-to_s-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>none</p>
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 261</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\t&quot;</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span>
  
  <span class="ruby-ivar">@table</span>[<span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">first</span>].<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">col</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">col</span>][<span class="ruby-identifier">index</span>].<span class="ruby-identifier">to_s</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">col</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">last</span>
        <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\t&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-top" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">top</span><span
            class="method-args">(colname, num=1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns counts of the most frequent values found in a given column in the
form of a <a href="Table.html">Table</a>.  Raises ArgumentError if the
column is not found.  If no limit is given to the number of values, only
the top value will be returned.</p>

<h4 id="method-i-top-label-Attributes">Attributes<span><a href="#method-i-top-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to count</p>
</dd><dt><code>num</code>
<dd>
<p>OPTIONAL <code>String</code> number of values to return</p>
</dd></dl>

<h4 id="method-i-top-label-Examples">Examples<span><a href="#method-i-top-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">top</span>(<span class="ruby-string">&quot;State&quot;</span>)  <span class="ruby-comment"># returns a Table with the most frequent state in the cities Table</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">top</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-value">10</span>)  <span class="ruby-comment"># returns a Table with the 10 most frequent states in the cities Table</span>
</pre>
          
          

          
          <div class="method-source-code" id="top-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 345</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">top</span>(<span class="ruby-identifier">colname</span>, <span class="ruby-identifier">num</span>=<span class="ruby-value">1</span>)
  <span class="ruby-identifier">freq</span> = <span class="ruby-identifier">tally</span>(<span class="ruby-identifier">colname</span>).<span class="ruby-identifier">to_a</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">sort_by</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> }.<span class="ruby-identifier">reverse</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">freq</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">num</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">unshift</span>([<span class="ruby-identifier">colname</span>,<span class="ruby-string">&quot;Count&quot;</span>]))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-union" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">union</span><span
            class="method-args">(table2, colname, col2name=colname)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return Array with the union of elements columns in the given tables,
eliminating duplicates. Raises an ArgumentError if a column is not found.</p>

<h4 id="method-i-union-label-Attributes">Attributes<span><a href="#method-i-union-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>table2</code>
<dd>
<p><code>Table</code> to identify the secondary table in the union</p>
</dd><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to union</p>
</dd><dt><code>col2name</code>
<dd>
<p>OPTIONAL <code>String</code> to identify the column in the second table to
union</p>
</dd></dl>

<h4 id="method-i-union-label-Examples">Examples<span><a href="#method-i-union-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">union</span>(<span class="ruby-identifier">capitals</span>, <span class="ruby-string">&quot;City&quot;</span>, <span class="ruby-string">&quot;Capital&quot;</span>)  <span class="ruby-comment"># returns Array with all cities in both tables</span>
</pre>
          
          

          
          <div class="method-source-code" id="union-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 553</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">union</span>(<span class="ruby-identifier">table2</span>, <span class="ruby-identifier">colname</span>, <span class="ruby-identifier">col2name</span>=<span class="ruby-identifier">colname</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid table!&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Table</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">colname</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid column name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">col2name</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">column</span>(<span class="ruby-identifier">colname</span>) <span class="ruby-operator">|</span> <span class="ruby-identifier">table2</span>.<span class="ruby-identifier">column</span>(<span class="ruby-identifier">col2name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-where" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">where</span><span
            class="method-args">(colname, condition=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Given a particular condition for a given column field/column, return a
subtable that matches the condition. If no condition is given, a new
<code>Table</code> is returned with all records. Returns an empty table if
the condition is not met or the column is not found.</p>

<h4 id="method-i-where-label-Attributes">Attributes<span><a href="#method-i-where-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>colname</code>
<dd>
<p><code>String</code> to identify the column to tally</p>
</dd><dt><code>condition</code>
<dd>
<p>OPTIONAL <code>String</code> containing a ruby condition to evaluate</p>
</dd></dl>

<h4 id="method-i-where-label-Examples">Examples<span><a href="#method-i-where-label-Examples">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">cities</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-string">&quot;==&#39;NY&#39;&quot;</span>)  <span class="ruby-comment"># returns a Table of cities in New York state </span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;State&quot;</span>, <span class="ruby-string">&quot;=~ /New.*/&quot;</span>)  <span class="ruby-comment"># returns a Table of cities in states that start with &quot;New&quot;</span>
<span class="ruby-identifier">cities</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;Population&quot;</span>, <span class="ruby-string">&quot;.to_i &gt; 1000000&quot;</span>)  <span class="ruby-comment"># returns a Table of cities with population over 1 million</span>
</pre>
          
          

          
          <div class="method-source-code" id="where-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">where</span>(<span class="ruby-identifier">colname</span>, <span class="ruby-identifier">condition</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-comment"># check arguments</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Invalid Column Name&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">colname</span>)

  <span class="ruby-identifier">result</span> = []
  <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@headers</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">condition</span>
      <span class="ruby-identifier">eval</span>(<span class="ruby-string">%q[&quot;#{row[headers.index(colname)]}&quot;]</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{condition}&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>()
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Table.html#method-i-get_rows">get_rows</a>
        </div>
        

        
      </div>

    
      <div id="method-i-write_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">write_file</span><span
            class="method-args">(filename)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Write a representation of the <code>Table</code> object to a file (tab
delimited).</p>

<h4 id="method-i-write_file-label-Attributes">Attributes<span><a href="#method-i-write_file-label-Attributes">&para;</a> <a href="#top">&uarr;</a></span></h4>
<dl class="rdoc-list note-list"><dt><code>filename</code>
<dd>
<p><code>String</code> to identify the name of the file to write</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="write_file-source">
            <pre><span class="ruby-comment"># File lib/tablestakes.rb, line 626</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_file</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-string">&quot;w&quot;</span>)
  <span class="ruby-identifier">file</span>.<span class="ruby-identifier">print</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

